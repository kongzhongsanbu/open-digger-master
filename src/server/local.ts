import { EOL } from "os";

const a = {
  "config": {
    "weight": {
      "issueCommentWeight": 1,
      "openIssueWeight": 2,
      "openPullWeight": 3,
      "pullReviewWeight": 4,
      "mergePullWeight": 5
    },
    "topN": 50,
    "actors": [
        {
            "id": 6128107,
            "name": "vuejs"
        },
        {
            "id": 48558747,
            "name": "selfteaching"
        },
        {
            "id": 37325267,
            "name": "OpenAPITools"
        },
        {
            "id": 6656686,
            "name": "gogs"
        },
        {
            "id": 18049346,
            "name": "Advanced-Frontend"
        },
        {
            "id": 28507035,
            "name": "nestjs"
        },
        {
            "id": 48942249,
            "name": "996icu"
        },
        {
            "id": 8121270,
            "name": "swoole"
        },
        {
            "id": 38549573,
            "name": "flutterchina"
        },
        {
            "id": 4210342,
            "name": "James-Yu"
        },
        {
            "id": 48206446,
            "name": "ccyyycy"
        },
        {
            "id": 7346661,
            "name": "fatedier"
        },
        {
            "id": 1783729,
            "name": "RT-Thread"
        },
        {
            "id": 905434,
            "name": "ruanyf"
        },
        {
            "id": 25221711,
            "name": "emqx"
        },
        {
            "id": 10770362,
            "name": "CarGuo"
        },
        {
            "id": 40586795,
            "name": "jdcloudcom"
        },
        {
            "id": 37326490,
            "name": "kubesphere"
        },
        {
            "id": 8860935,
            "name": "xingyizhou"
        },
        {
            "id": 6375567,
            "name": "hexojs"
        },
        {
            "id": 55953652,
            "name": "algorithm004-05"
        },
        {
            "id": 45676665,
            "name": "a13112165035"
        },
        {
            "id": 55792074,
            "name": "LuClass"
        },
        {
            "id": 18395216,
            "name": "qqwweee"
        },
        {
            "id": 55953526,
            "name": "algorithm004-03"
        },
        {
            "id": 24796,
            "name": "neolee"
        },
        {
            "id": 33895495,
            "name": "umijs"
        },
        {
            "id": 8121621,
            "name": "PanJiaChen"
        },
        {
            "id": 31687149,
            "name": "coolsnowwolf"
        },
        {
            "id": 10245193,
            "name": "open-mmlab"
        },
        {
            "id": 10395542,
            "name": "XX-net"
        },
        {
            "id": 8266075,
            "name": "DIYgod"
        },
        {
            "id": 19258107,
            "name": "baomidou"
        },
        {
            "id": 20693613,
            "name": "iview"
        },
        {
            "id": 31833528,
            "name": "haizlin"
        },
        {
            "id": 470058,
            "name": "michaelliao"
        },
        {
            "id": 32120805,
            "name": "vueComponent"
        },
        {
            "id": 30223759,
            "name": "NG-ZORRO"
        },
        {
            "id": 1479100,
            "name": "z-song"
        },
        {
            "id": 5485517,
            "name": "dcloudio"
        },
        {
            "id": 20162049,
            "name": "testerSunshine"
        },
        {
            "id": 12208044,
            "name": "hzuapps"
        },
        {
            "id": 19645609,
            "name": "YMFE"
        },
        {
            "id": 18225919,
            "name": "komeiji-satori"
        },
        {
            "id": 6843,
            "name": "jinzhu"
        },
        {
            "id": 10633817,
            "name": "xuxueli"
        },
        {
            "id": 5344173,
            "name": "syhyz1990"
        },
        {
            "id": 47803121,
            "name": "taichi-framework"
        },
        {
            "id": 6006570,
            "name": "jumpserver"
        },
        {
            "id": 26101616,
            "name": "Alivon"
        },
        {
            "id": 29697133,
            "name": "gitalk"
        },
        {
            "id": 21032456,
            "name": "deepinsight"
        },
        {
            "id": 10233853,
            "name": "MiEcosystem"
        },
        {
            "id": 48876650,
            "name": "taosdata"
        },
        {
            "id": 41097204,
            "name": "OI-wiki"
        },
        {
            "id": 30433053,
            "name": "YunYang1994"
        },
        {
            "id": 44228082,
            "name": "hyperf"
        },
        {
            "id": 3162115,
            "name": "zhangdaiscott"
        },
        {
            "id": 31959043,
            "name": "RikkaApps"
        },
        {
            "id": 55911265,
            "name": "algorithm004-01"
        }
    ],
    "repos": [
        {
            "id": 45721011,
            "name": "apache/skywalking",
            "company": ""
        },
        {
            "id": 180481986,
            "name": "apache/apisix",
            "company": ""
        },
        {
            "id": 60844036,
            "name": "shadowsocks/ShadowsocksX-NG",
            "company": ""
        },
        {
            "id": 173335706,
            "name": "apache/incubator-dolphinscheduler",
            "company": ""
        },
        {
            "id": 40345658,
            "name": "recharts/recharts",
            "company": ""
        },
        {
            "id": 99919302,
            "name": "apache/incubator-doris",
            "company": ""
        },
        {
            "id": 129345192,
            "name": "consenlabs/token-profile",
            "company": ""
        },
        {
            "id": 70746484,
            "name": "apache/tvm",
            "company": ""
        },
        {
            "id": 131770422,
            "name": "neoclide/coc.nvim",
            "company": ""
        },
        {
            "id": 7600409,
            "name": "shadowsocks/shadowsocks-windows",
            "company": ""
        },
        {
            "id": 4710920,
            "name": "apache/dubbo",
            "company": "Alibaba"
        },
        {
            "id": 78186814,
            "name": "apache/incubator-weex",
            "company": "Alibaba"
        },
        {
            "id": 75164823,
            "name": "apache/rocketmq",
            "company": "Alibaba"
        },
        {
            "id": 9185792,
            "name": "apache/echarts",
            "company": "Baidu"
        },
        {
            "id": 102343794,
            "name": "apache/incubator-brpc",
            "company": "Baidu"
        },
        {
            "id": 97573661,
            "name": "apache/servicecomb-pack",
            "company": "Huawei"
        },
        {
            "id": 91674936,
            "name": "apache/servicecomb-java-chassis",
            "company": "Huawei"
        },
        {
            "id": 91677514,
            "name": "apache/servicecomb-service-center",
            "company": "Huawei"
        },
        {
            "id": 49876476,
            "name": "apache/shardingsphere",
            "company": "JD"
        }
    ],
    "orgs": [
        {
            "id": 1961952,
            "name": "alibaba",
            "company": "Alibaba"
        },
        {
            "id": 941070,
            "name": "aliyun",
            "company": "Alibaba"
        },
        {
            "id": 1299356,
            "name": "alipay",
            "company": "Alibaba"
        },
        {
            "id": 1560507,
            "name": "taobao",
            "company": "Alibaba"
        },
        {
            "id": 4538353,
            "name": "thx",
            "company": "Alibaba"
        },
        {
            "id": 328318,
            "name": "kissyteam",
            "company": "Alibaba"
        },
        {
            "id": 12101536,
            "name": "ant-design",
            "company": "Alibaba"
        },
        {
            "id": 19199542,
            "name": "antvis",
            "company": "Alibaba"
        },
        {
            "id": 3334825,
            "name": "kissygalleryteam",
            "company": "Alibaba"
        },
        {
            "id": 539149,
            "name": "seajs",
            "company": "Alibaba"
        },
        {
            "id": 32128461,
            "name": "midwayjs",
            "company": "Alibaba"
        },
        {
            "id": 11186302,
            "name": "ali-sdk",
            "company": "Alibaba"
        },
        {
            "id": 6365106,
            "name": "cnpm",
            "company": "Alibaba"
        },
        {
            "id": 13195604,
            "name": "hiloteam",
            "company": "Alibaba"
        },
        {
            "id": 15833670,
            "name": "eggjs",
            "company": "Alibaba"
        },
        {
            "id": 12892132,
            "name": "macacajs",
            "company": "Alibaba"
        },
        {
            "id": 12810740,
            "name": "ElemeFE",
            "company": "Alibaba"
        },
        {
            "id": 20021831,
            "name": "youkuvip",
            "company": "Alibaba"
        },
        {
            "id": 20552239,
            "name": "dvajs",
            "company": "Alibaba"
        },
        {
            "id": 48813648,
            "name": "seata",
            "company": "Alibaba"
        },
        {
            "id": 44993420,
            "name": "dragonflyoss",
            "company": "Alibaba"
        },
        {
            "id": 36956638,
            "name": "sofastack",
            "company": "Alibaba"
        },
        {
            "id": 48477425,
            "name": "chaosblade-io",
            "company": "Alibaba"
        },
        {
            "id": 16377432,
            "name": "AliyunContainerService",
            "company": "Alibaba"
        },
        {
            "id": 7741285,
            "name": "aliqin",
            "company": "Alibaba"
        },
        {
            "id": 38934544,
            "name": "AlibabaCloudDocs",
            "company": "Alibaba"
        },
        {
            "id": 43955412,
            "name": "sentinel-group",
            "company": "Alibaba"
        },
        {
            "id": 13003405,
            "name": "unijs",
            "company": "Alibaba"
        },
        {
            "id": 43056710,
            "name": "mars-project",
            "company": "Alibaba"
        },
        {
            "id": 30042306,
            "name": "node-honeycomb",
            "company": "Alibaba"
        },
        {
            "id": 13245940,
            "name": "baidu",
            "company": "Baidu"
        },
        {
            "id": 23534030,
            "name": "PaddlePaddle",
            "company": "Baidu"
        },
        {
            "id": 28768304,
            "name": "ApolloAuto",
            "company": "Baidu"
        },
        {
            "id": 7857697,
            "name": "Clouda-team",
            "company": "Baidu"
        },
        {
            "id": 19966931,
            "name": "mipengine",
            "company": "Baidu"
        },
        {
            "id": 34010907,
            "name": "mesalock-linux",
            "company": "Baidu"
        },
        {
            "id": 2268460,
            "name": "ecomfe",
            "company": "Baidu"
        },
        {
            "id": 6668906,
            "name": "fex-team",
            "company": "Baidu"
        },
        {
            "id": 8051311,
            "name": "baidu-research",
            "company": "Baidu"
        },
        {
            "id": 13144859,
            "name": "huiyan-fe",
            "company": "Baidu"
        },
        {
            "id": 8372490,
            "name": "be-fe",
            "company": "Baidu"
        },
        {
            "id": 38243092,
            "name": "swan-team",
            "company": "Baidu"
        },
        {
            "id": 18461506,
            "name": "Tencent",
            "company": "Tencent"
        },
        {
            "id": 1503033,
            "name": "AlloyTeam",
            "company": "Tencent"
        },
        {
            "id": 42138346,
            "name": "TarsCloud",
            "company": "Tencent"
        },
        {
            "id": 14183739,
            "name": "weixin",
            "company": "Tencent"
        },
        {
            "id": 12334581,
            "name": "tencentyun",
            "company": "Tencent"
        },
        {
            "id": 20315766,
            "name": "Huawei",
            "company": "Huawei"
        },
        {
            "id": 6876878,
            "name": "huawei-cloudnative",
            "company": "Huawei"
        },
        {
            "id": 36578213,
            "name": "huaweicloud",
            "company": "Huawei"
        },
        {
            "id": 41812520,
            "name": "kubeedge",
            "company": "Huawei"
        },
        {
            "id": 41812465,
            "name": "kubegene",
            "company": "Huawei"
        },
        {
            "id": 22132015,
            "name": "LiteOS",
            "company": "Huawei"
        },
        {
            "id": 12619994,
            "name": "huawei-noah",
            "company": "Huawei"
        },
        {
            "id": 977371,
            "name": "meituan",
            "company": "Meituan"
        },
        {
            "id": 20238146,
            "name": "Meituan-Dianping",
            "company": "Meituan"
        },
        {
            "id": 1539555,
            "name": "dianping",
            "company": "Meituan"
        },
        {
            "id": 4082929,
            "name": "Qihoo360",
            "company": "360"
        },
        {
            "id": 29911379,
            "name": "spritejs",
            "company": "360"
        },
        {
            "id": 15226349,
            "name": "thinkjs",
            "company": "360"
        },
        {
            "id": 29886630,
            "name": "Chimeejs",
            "company": "360"
        },
        {
            "id": 5575368,
            "name": "75team",
            "company": "360"
        },
        {
            "id": 54881990,
            "name": "0Kee-Team",
            "company": "360"
        },
        {
            "id": 1309360,
            "name": "XiaoMi",
            "company": "Xiaomi"
        },
        {
            "id": 1274540,
            "name": "MiCode",
            "company": "Xiaomi"
        },
        {
            "id": 11855343,
            "name": "pingcap",
            "company": "PingCAP"
        },
        {
            "id": 41004122,
            "name": "tikv",
            "company": "PingCAP"
        },
        {
            "id": 11404085,
            "name": "youzan",
            "company": "Youzan"
        },
        {
            "id": 39963175,
            "name": "areslabs",
            "company": "JD"
        },
        {
            "id": 30794937,
            "name": "NervJS",
            "company": "JD"
        },
        {
            "id": 22739181,
            "name": "jdf2e",
            "company": "JD"
        },
        {
            "id": 4158466,
            "name": "bytedance",
            "company": "Bytedance"
        },
        {
            "id": 1460597,
            "name": "NetEase",
            "company": "Netease"
        },
        {
            "id": 14069894,
            "name": "netease-im",
            "company": "Netease"
        },
        {
            "id": 34292813,
            "name": "AirtestProject",
            "company": "Netease"
        },
        {
            "id": 21099191,
            "name": "163yun",
            "company": "Netease"
        },
        {
            "id": 27521938,
            "name": "didi",
            "company": "DiDi"
        },
        {
            "id": 7145544,
            "name": "vipshop",
            "company": "Vipshop"
        },
        {
            "id": 1592697,
            "name": "linuxdeepin",
            "company": "Deepin"
        },
        {
            "id": 44182399,
            "name": "WeBankFinTech",
            "company": "WeBank"
        },
        {
            "id": 1220164,
            "name": "douban",
            "company": "Douban"
        },
        {
            "id": 5432002,
            "name": "LCTT",
            "company": "Linux China"
        },
        {
            "id": 10720307,
            "name": "ctripcorp",
            "company": "CTrip"
        },
        {
            "id": 43158242,
            "name": "qunarcorp",
            "company": "Qunar"
        },
        {
            "id": 10482599,
            "name": "xitu",
            "company": "Juejin"
        },
        {
            "id": 12002442,
            "name": "bilibili",
            "company": "Bilibili"
        }
    ]
  },
  "description": "Return top most active Chinese repo and company of year {{year}} "
};

// const actors = a.config.actors;
const repos: { id: number; name: string; company: string }[] = a.config.repos;
const orgs: { id: number; name: string; company: string }[] = a.config.orgs;

interface companyInfo {
  orgs: {
    name: string;
    id: number;
  }[],
  repos: {
    name: string;
    id: number;
  }[],
};
const map = new Map<string, companyInfo>();

repos.forEach(repo => {
  let company = repo.company;
  if (!company) {
    company = 'None';
  }
  if (!map.has(company)) {
    map.set(company, {
      orgs: [],
      repos: [],
    });
  }
  map.get(company)!.repos.push({
    id: repo.id,
    name: repo.name,
  });
});

orgs.forEach(org => {
  let company = org.company;
  if (!company) {
    company = 'None';
  }
  if (!map.has(company)) {
    map.set(company, {
      orgs: [],
      repos: [],
    });
  }
  map.get(company)!.orgs.push({
    id: org.id,
    name: org.name,
  });
});

for (const [k, v] of map) {
  console.log(`  ${k}:`);
  if (v.orgs.length > 0) {
    console.log(`    orgs:`);
    console.log(v.orgs.map(o => `      - ${o.id} # ${o.name}`).join(EOL));
  }
  if (v.repos.length > 0) {
    console.log(`    repos:`);
    console.log(v.repos.map(r => `      - ${r.id} # ${r.name}`).join(EOL));
  }
}
